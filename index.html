<!doctype html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EspÃ­ritu GuardiÃ¡n - SimulaciÃ³n Tribal</title>
  <link rel="stylesheet" href="/style_construction_panel.css" />
</head>

<body>
  <div id="app">
    <header id="game-header">
      <div class="header-left">
        <h1 class="game-title">ğŸŒŸ EspÃ­ritu GuardiÃ¡n</h1>
      </div>
      <div class="header-stats" aria-label="Indicadores de tribu">
        <div class="hud-pill" data-stat="faith">
          <span class="hud-pill-icon" aria-hidden="true">âœ¨</span>
          <span class="hud-pill-value" id="score" aria-label="Fe">0</span>
        </div>
        <div class="hud-pill" data-stat="population">
          <span class="hud-pill-icon" aria-hidden="true">ğŸ‘¥</span>
          <span class="hud-pill-value" id="energy" aria-label="PoblaciÃ³n">0</span>
        </div>
        <div class="hud-pill" data-stat="climate">
          <span class="hud-pill-value" id="time" aria-label="Clima" title="Clima templado">â›…</span>
        </div>
        <div class="hud-pill" data-stat="food">
          <span class="hud-pill-icon" aria-hidden="true">ğŸŒ¾</span>
          <span class="hud-pill-value" id="food" aria-label="Comida">0</span>
        </div>
        <div class="hud-pill" data-stat="stone">
          <span class="hud-pill-icon" aria-hidden="true">ğŸª¨</span>
          <span class="hud-pill-value" id="stone" aria-label="Piedra">0</span>
        </div>
        <div class="hud-pill" data-stat="wood">
          <span class="hud-pill-icon" aria-hidden="true">ğŸŒ²</span>
          <span class="hud-pill-value" id="wood" aria-label="Madera">0</span>
        </div>
        <div class="hud-pill" data-stat="water">
          <span class="hud-pill-icon" aria-hidden="true">ğŸ’§</span>
          <span class="hud-pill-value" id="water" aria-label="Agua">0</span>
        </div>
      </div>
      <nav class="header-nav">
        <button class="header-btn" id="btn-new-game" title="Nueva Partida">ğŸ”„ Nueva</button>
        <button class="header-btn" id="btn-save" title="Guardar Partida">ğŸ’¾ Guardar</button>
        <button class="header-btn" id="btn-load" title="Cargar Partida">ğŸ“‚ Cargar</button>
        <button class="header-btn" id="btn-settings" title="ConfiguraciÃ³n">âš™ï¸ Config</button>
        <button class="header-btn" id="btn-help" title="Ayuda">â“ Ayuda</button>
        <button class="header-btn header-btn-wallet" id="btn-wallet" title="Conectar OneWallet">
          <span id="wallet-icon">ğŸ”—</span>
          <span id="wallet-text">Conectar</span>
        </button>
      </nav>
    </header>

    <!-- Citizen Portrait Bar (RimWorld-style) -->
    <div id="citizen-portrait-bar" class="citizen-portrait-bar"></div>

    <div id="layout">
      <div id="game-wrapper">
        <canvas id="game"></canvas>
        <div id="zoom-controls" role="group" aria-label="Controles de zoom">
          <button type="button" class="zoom-btn" id="zoom-out" title="Alejar mapa">âˆ’</button>
          <button type="button" class="zoom-btn" id="zoom-in" title="Acercar mapa">+</button>
        </div>
      </div>

      <aside id="ui-panel">
        <section class="panel-block" id="roles-panel">
          <h2>Oficios</h2>
          <div class="role-control" data-role="farmer">
            <label for="role-farmer">Granjero</label>
            <input type="range" id="role-farmer" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-farmer">2</span>
          </div>
          <div class="role-control" data-role="worker">
            <label for="role-worker">Trabajador</label>
            <input type="range" id="role-worker" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-worker">2</span>
          </div>
          <div class="role-control" data-role="warrior">
            <label for="role-warrior">Guerrero</label>
            <input type="range" id="role-warrior" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-warrior">2</span>
          </div>
          <div class="role-control" data-role="scout">
            <label for="role-scout">Explorador</label>
            <input type="range" id="role-scout" min="0" max="10" value="1" step="1" />
            <span class="role-value" id="role-value-scout">1</span>
          </div>
          <p class="role-note">Los niÃ±os y ancianos no se reasignan automÃ¡ticamente.</p>
        </section>

        <section class="panel-block" id="planning-panel">
          <h2>PlanificaciÃ³n</h2>
          <div class="planning-modes" role="group" aria-label="Modos de planificaciÃ³n">
            <button type="button" class="planning-button" data-planning-mode="farm" title="Planificar cultivos (F)">
              ğŸŒ¾ Cultivos
            </button>
            <button type="button" class="planning-button" data-planning-mode="mine" title="Planificar canteras (M)">
              ğŸª¨ MinerÃ­a
            </button>
            <button type="button" class="planning-button" data-planning-mode="gather"
              title="Planificar recolecciÃ³n (G)">
              ğŸƒ RecolecciÃ³n
            </button>
            <button type="button" class="planning-button" data-planning-mode="build" title="Modo construcciÃ³n (B)">
              ğŸ§± ConstrucciÃ³n
            </button>
          </div>

          <!-- Permanent Hexagonal Construction Panel -->
          <div class="construction-panel" id="construction-panel">
            <!-- Campfire -->
            <button type="button" class="construction-hex-button" data-structure="campfire" title="Hoguera">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/bonfire.png" alt="Hoguera" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- House -->
            <button type="button" class="construction-hex-button" data-structure="house" title="Casa comunal">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/house.png" alt="Casa" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Village -->
            <button type="button" class="construction-hex-button" data-structure="village" title="Plaza central">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/barn.png" alt="Villa" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Granary -->
            <button type="button" class="construction-hex-button" data-structure="granary" title="Granero">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/barn.png" alt="Granero" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Warehouse -->
            <button type="button" class="construction-hex-button" data-structure="warehouse" title="AlmacÃ©n">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/warehouse.png" alt="AlmacÃ©n" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Tower -->
            <button type="button" class="construction-hex-button" data-structure="tower" title="Torre vigÃ­a">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/Tower_defense.png" alt="Torre" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Temple -->
            <button type="button" class="construction-hex-button" data-structure="temple" title="Templo ancestral">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/Temple.png" alt="Templo" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>
          </div>

          <!-- Build details info (shown below hexagons when a structure is selected) -->
          <div class="build-details" id="build-details" style="margin-top: 8px;">
            <p class="build-details-summary" id="build-details-summary">Selecciona un edificio para ver detalles.</p>
            <p class="build-details-meta">
              <span class="build-details-label">Coste:</span>
              <span id="build-details-cost">-</span>
            </p>
            <p class="build-details-meta">
              <span class="build-details-label">Requisitos:</span>
              <span id="build-details-requirements">-</span>
            </p>
          </div>

          <div class="planning-hint" id="planning-hint">Selecciona un modo para empezar a marcar zonas.
          </div>
        </section>

        <section class="panel-block" id="instructions">
          <h2>SimulaciÃ³n</h2>
          <p id="status-text">SimulaciÃ³n en curso.</p>
          <div id="speed-controls" class="speed-controls" role="group" aria-label="Velocidad de simulaciÃ³n">
            <span class="speed-label">Velocidad:</span>
            <div class="speed-button-group">
              <button type="button" class="panel-button speed-button" data-speed="1">1Ã— Normal</button>
              <button type="button" class="panel-button speed-button" data-speed="2">2Ã—</button>
              <button type="button" class="panel-button speed-button" data-speed="5">5Ã—</button>
            </div>
          </div>
          <div class="panel-actions">
            <button id="pause-button" class="panel-button">â¸ï¸ Pausar</button>
            <button id="debug-export" class="panel-button" disabled>â¬‡ï¸ Descargar debug</button>
          </div>
        </section>

        <section class="panel-block" id="history-panel">
          <h2>CrÃ³nica</h2>
          <ul id="history"></ul>
        </section>
      </aside>
    </div>
  </div>

  <!-- Citizen Control Panel (Bottom Left) -->
  <div id="citizen-control-panel" class="hidden"></div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>