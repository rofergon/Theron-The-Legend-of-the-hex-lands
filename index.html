<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Theron: Legends of the Hex Lands - Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/style_construction_panel.css" />
</head>

<body>
  <div id="app">
    <header id="game-header">
      <div class="header-left">
        <img src="/assets/Landing/Theron_game_logo.png" alt="Theron: Legends of the Hex Lands" class="game-logo" />
      </div>
      <div class="header-stats" aria-label="Tribe indicators">
        <div class="hud-pill" data-stat="faith">
          <span class="hud-pill-icon" aria-hidden="true">‚ú®</span>
          <span class="hud-pill-value" id="score" aria-label="Faith">0</span>
        </div>
        <div class="hud-pill token-pill" data-stat="token1" id="token1-pill" role="button" tabindex="0"
          title="Convert Faith to Token1">
          <span class="hud-pill-icon" aria-hidden="true">ü™ô</span>
          <span class="hud-pill-value" id="token1-value" aria-label="Token1">0</span>
        </div>
        <div class="hud-pill token-pill" data-stat="token2" id="token2-pill" title="Token2 balance">
          <span class="hud-pill-icon" aria-hidden="true">üí†</span>
          <span class="hud-pill-value" id="token2-value" aria-label="Token2">0</span>
        </div>
        <div class="hud-pill" data-stat="population">
          <span class="hud-pill-icon" aria-hidden="true">üë•</span>
          <span class="hud-pill-value" id="energy" aria-label="Population">0</span>
        </div>
        <div class="hud-pill" data-stat="climate">
          <span class="hud-pill-value" id="time" aria-label="Climate" title="Temperate climate">‚õÖ</span>
        </div>
        <div class="hud-pill" data-stat="food">
          <span class="hud-pill-icon" aria-hidden="true">üåæ</span>
          <span class="hud-pill-value" id="food" aria-label="Food">0</span>
        </div>
        <div class="hud-pill" data-stat="stone">
          <span class="hud-pill-icon" aria-hidden="true">ü™®</span>
          <span class="hud-pill-value" id="stone" aria-label="Stone">0</span>
        </div>
        <div class="hud-pill" data-stat="wood">
          <span class="hud-pill-icon" aria-hidden="true">üå≤</span>
          <span class="hud-pill-value" id="wood" aria-label="Wood">0</span>
        </div>
        <div class="hud-pill" data-stat="water">
          <span class="hud-pill-icon" aria-hidden="true">üíß</span>
          <span class="hud-pill-value" id="water" aria-label="Water">0</span>
        </div>
      </div>
      <div class="header-controls" aria-label="Simulation controls">
        <div class="speed-controls-header" role="group" aria-label="Speed">
          <button type="button" class="header-control-btn speed-button" data-speed="1"
            title="Normal speed (1x)">1√ó</button>
          <button type="button" class="header-control-btn speed-button" data-speed="2"
            title="Fast speed (2x)">2√ó</button>
          <button type="button" class="header-control-btn speed-button" data-speed="5"
            title="Very fast speed (5x)">5√ó</button>
        </div>
        <button id="pause-button" class="header-control-btn pause-btn" title="Pause/Resume">‚è∏Ô∏è</button>
      </div>
    </header>

    <!-- Citizen Portrait Bar (RimWorld-style) -->
    <div id="citizen-portrait-bar" class="citizen-portrait-bar"></div>

    <div id="layout">
      <div id="game-wrapper">
        <canvas id="game"></canvas>
        <div id="zoom-controls" role="group" aria-label="Zoom controls">
          <button type="button" class="zoom-btn" id="zoom-out" title="Zoom out">‚àí</button>
          <button type="button" class="zoom-btn" id="zoom-in" title="Zoom in">+</button>
        </div>
      </div>

      <aside id="ui-panel">
        <section class="panel-block" id="roles-panel">
          <h2>Professions</h2>
          <div class="role-control" data-role="farmer">
            <label for="role-farmer">Farmer</label>
            <input type="range" id="role-farmer" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-farmer">2</span>
          </div>
          <div class="role-control" data-role="worker">
            <label for="role-worker">Worker</label>
            <input type="range" id="role-worker" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-worker">2</span>
          </div>
          <div class="role-control" data-role="warrior">
            <label for="role-warrior">Warrior</label>
            <input type="range" id="role-warrior" min="0" max="10" value="2" step="1" />
            <span class="role-value" id="role-value-warrior">2</span>
          </div>
          <div class="role-control" data-role="scout">
            <label for="role-scout">Scout</label>
            <input type="range" id="role-scout" min="0" max="10" value="1" step="1" />
            <span class="role-value" id="role-value-scout">1</span>
          </div>
          <div class="role-control" data-role="devotee">
            <div class="role-control-header">
              <label for="role-devotee" title="Assign devotees to temples to generate Faith">Devotees</label>
              <span class="role-slot-badge" id="role-devotee-slots" title="Devotee slots filled/total">0/0</span>
            </div>
            <input type="range" id="role-devotee" min="0" max="0" value="0" step="1" disabled />
            <span class="role-value" id="role-value-devotee">0</span>
            <p class="role-note" id="role-devotee-help">Build a temple to enable devotees.</p>
          </div>
          <p class="role-note">Children and elders are not reassigned automatically.</p>
        </section>

        <section class="panel-block" id="planning-panel">
          <h2>Planning</h2>
          <div class="planning-modes" role="group" aria-label="Planning modes">
            <button type="button" class="planning-hex-button" data-planning-mode="farm" title="Plan crops (F)"
              aria-label="Plan crops (F)">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/wheat.png" alt="Crops" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>
            <button type="button" class="planning-hex-button" data-planning-mode="mine" title="Plan mining (M)"
              aria-label="Plan mining (M)">
              <div class="hex-background"></div>
              <span class="hex-icon hex-icon-emoji" aria-hidden="true">ü™®</span>
              <div class="hex-frame"></div>
            </button>
            <button type="button" class="planning-hex-button" data-planning-mode="gather" title="Plan gathering (G)"
              aria-label="Plan gathering (G)">
              <div class="hex-background"></div>
              <span class="hex-icon hex-icon-emoji" aria-hidden="true">üçÉ</span>
              <div class="hex-frame"></div>
            </button>
          </div>

          <div class="planning-hint" id="planning-hint">Select a mode to start marking zones.
          </div>
        </section>

        <section class="panel-block" id="buildings-panel">
          <h2>Buildings</h2>
          <!-- Permanent Hexagonal Construction Panel -->
          <div class="construction-panel" id="construction-panel">
            <!-- Campfire -->
            <button type="button" class="construction-hex-button" data-structure="campfire" title="Campfire">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/bonfire.png" alt="Campfire" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- House -->
            <button type="button" class="construction-hex-button" data-structure="house" title="Communal house">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/house.png" alt="House" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Village -->
            <button type="button" class="construction-hex-button" data-structure="village" title="Central plaza">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/barn.png" alt="Central plaza" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Granary -->
            <button type="button" class="construction-hex-button" data-structure="granary" title="Granary">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/barn.png" alt="Granary" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Warehouse -->
            <button type="button" class="construction-hex-button" data-structure="warehouse" title="Warehouse">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/warehouse.png" alt="Warehouse" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Tower -->
            <button type="button" class="construction-hex-button" data-structure="tower" title="Watchtower">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/Tower_defense.png" alt="Watchtower" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>

            <!-- Temple -->
            <button type="button" class="construction-hex-button" data-structure="temple" title="Ancestral temple">
              <div class="hex-background"></div>
              <img src="/assets/extracted_icons/Temple.png" alt="Temple" class="hex-icon" />
              <div class="hex-frame"></div>
            </button>
          </div>

          <!-- Build details info (shown below hexagons when a structure is selected) -->
          <div class="build-details" id="build-details" style="margin-top: 8px;">
            <p class="build-details-summary" id="build-details-summary">Select a building to view details.</p>
            <p class="build-details-meta">
              <span class="build-details-label">Cost:</span>
              <span id="build-details-cost">-</span>
            </p>
            <p class="build-details-meta">
              <span class="build-details-label">Requirements:</span>
              <span id="build-details-requirements">-</span>
            </p>
          </div>
        </section>

        <section class="panel-block" id="history-panel">
          <h2>Chronicle</h2>
          <ul id="history"></ul>
        </section>
      </aside>
    </div>
  </div>

  <!-- Citizen Control Panel (Bottom Left) -->
  <div id="citizen-control-panel" class="hidden"></div>

  <!-- Token conversion modal -->
  <div id="token-modal-backdrop" class="modal-backdrop hidden"></div>
  <div id="token-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="token-modal-title">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="token-modal-title">Convert Faith to HEX ü™ô</h3>
        <button type="button" class="modal-close" id="token-modal-close" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <p id="token-modal-status">Select how much to convert.</p>
        <div class="modal-row">
          <span>Available Faith ‚ú®</span>
          <strong id="token-modal-faith">0</strong>
        </div>
        <div class="modal-row">
          <span>Conversion Rate</span>
          <strong id="token-modal-rate">100 Faith ‚Üí 1 HEX</strong>
        </div>
        <div class="modal-info">
          <small>üí° Esta conversi√≥n crear√° HEX tokens en la blockchain de OneChain. Necesitar√°s firmar la transacci√≥n con tu OneWallet.</small>
        </div>
      </div>
      <div class="modal-actions">
        <button type="button" id="token-convert-all" class="primary">Convert all</button>
        <button type="button" id="token-modal-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>